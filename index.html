<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiny Rock Miner</title>
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-image: url('https://i.ytimg.com/vi/ZqFwlWu4MLk/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGEkgGSh_MA8=&rs=AOn4CLBZHi7uK08SYl6uVgE-mDragz0Hhg');
            background-size: cover;
            background-position: center;
        }
        #sidebar {
            width: 350px;
            background-color: rgba(0, 123, 255, 0.8);
            color: white;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
        }
        #main {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        #rock { width: 500px; cursor: pointer; }
        #message { color: red; font-weight: bold; margin-top: 20px; display: none; }
        h1 { color: purple; }
        button {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            margin: 5px 0;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Shiny Rocks: <span id="rockCount">0</span></h2>
        <button id="upgradeButton">Upgrade Click (Cost: 10 shiny rocks) - Upgrades: <span id="upgradeCount">0</span></button>
        <button id="autoClickerButton">Buy Auto Miner (Cost: 50 shiny rocks) - Auto Miners: <span id="autoMinerCount">0</span></button>
        <button id="minigameButton">Play a Minigame (Cost: 100 shiny rocks) - Minigames: <span id="minigameCount">0</span></button>
        <button id="playGameButton">Playing the Game (Cost: 200 shiny rocks) - Games: <span id="playGameCount">0</span></button>
        <button id="saveButton">Save Game</button>
        <button id="resetButton">Reset Progress</button>
        <div id="message"></div>
    </div>

    <div id="main">
        <h1>Shiny Rock Miner</h1>
        <h2>Shiny Rocks: <span id="rockCountAbove">0</span></h2>
        <img id="rock" src="https://orig00.deviantart.net/62cb/f/2011/169/1/c/365_day_168_crystals_by_korikian-d3j8n69.png" alt="Shiny Rock">
        <h3>Auto Miner Output: <span id="autoClickerOutput">0</span> shiny rocks per second</h3>
    </div>

    <script>
        let rockCount = 0;
        let upgradeCost = 10;
        let autoMinerCost = 50; 
        let minigameCost = 100;
        let playGameCost = 200;
        let clickValue = 1;
        let autoMinerValue = 0; 
        let autoMinerActive = false; 
        let minigameActive = false;
        let playGameActive = false;

        let upgradeCount = 0;
        let autoMinerCount = 0;
        let minigameCount = 0;
        let playGameCount = 0;

        let autoMinerInterval;
        let minigameInterval;
        let playGameInterval;

        document.getElementById("rock").addEventListener("click", () => {
            rockCount += clickValue;
            updateRockCount();
        });

        document.getElementById("upgradeButton").addEventListener("click", () => {
            if (rockCount >= upgradeCost) {
                rockCount -= upgradeCost;
                clickValue += 1;
                upgradeCost = Math.floor(upgradeCost * 1.3);
                upgradeCount++;
                updateRockCount();
                document.getElementById("upgradeButton").innerText = `Upgrade Click (Cost: ${upgradeCost} shiny rocks) - Upgrades: ${upgradeCount}`;
            } else {
                showMessage("Not enough shiny rocks!");
            }
        });

        document.getElementById("autoClickerButton").addEventListener("click", () => {
            if (rockCount >= autoMinerCost) {
                rockCount -= autoMinerCost;
                autoMinerValue += 1;
                autoMinerCount++;
                autoMinerCost = Math.floor(autoMinerCost * 1.3);
                updateRockCount();
                document.getElementById("autoClickerOutput").innerText = autoMinerValue;
                document.getElementById("autoClickerButton").innerText = `Buy Auto Miner (Cost: ${autoMinerCost} shiny rocks) - Auto Miners: ${autoMinerCount}`;

                if (!autoMinerActive) {
                    startAutoMiner();
                }
            } else {
                showMessage("Not enough shiny rocks!");
            }
        });

        document.getElementById("minigameButton").addEventListener("click", () => {
            if (rockCount >= minigameCost) {
                rockCount -= minigameCost;
                minigameActive = true;
                minigameCount++;
                updateRockCount();

                if (!minigameInterval) {
                    startMinigame();
                }

                minigameCost = Math.floor(minigameCost * 1.3);
                document.getElementById("minigameButton").innerText = `Play a Minigame (Cost: ${minigameCost} shiny rocks) - Minigames: ${minigameCount}`;
            } else {
                showMessage("Not enough shiny rocks!");
            }
        });

        document.getElementById("playGameButton").addEventListener("click", () => {
            if (rockCount >= playGameCost) {
                rockCount -= playGameCost;
                playGameCount++;
                updateRockCount();

                if (!playGameActive) { // Check if the upgrade is not already active
                    playGameActive = true; // Set the active state
                    startPlayGame(); // Start the interval to add rocks
                }

                playGameCost = Math.floor(playGameCost * 1.3);
                document.getElementById("playGameButton").innerText = `Playing the Game (Cost: ${playGameCost} shiny rocks) - Games: ${playGameCount}`;
            } else {
                showMessage("Not enough shiny rocks!");
            }
        });

        // Save game state to localStorage
        function saveGame() {
            const gameState = {
                rockCount, clickValue, upgradeCost, autoMinerCost, minigameCost, playGameCost,
                autoMinerValue, autoMinerCount, minigameCount, playGameCount, upgradeCount,
                autoMinerActive, minigameActive, playGameActive
            };
            localStorage.setItem("gameState", JSON.stringify(gameState));
        }

        // Reset game state
        document.getElementById("resetButton").addEventListener("click", () => {
            if (confirm("Are you sure you want to reset your progress?")) {
                resetGame();
                showMessage("Game progress reset!");
            }
        });

        function resetGame() {
            rockCount = 0;
            clickValue = 1;
            upgradeCost = 10;
            autoMinerCost = 50;
            minigameCost = 100;
            playGameCost = 200;
            autoMinerValue = 0;
            autoMinerCount = 0;
            minigameCount = 0;
            playGameCount = 0;
            upgradeCount = 0;
            autoMinerActive = false;
            minigameActive = false;
            playGameActive = false;
            localStorage.removeItem("gameState"); // Clear the saved game
            updateUI();
            clearIntervals(); // Clear any existing intervals
        }

        function updateRockCount() {
            document.getElementById("rockCount").innerText = rockCount;
            document.getElementById("rockCountAbove").innerText = rockCount;
        }

        function updateUI() {
            document.getElementById("upgradeButton").innerText = `Upgrade Click (Cost: ${upgradeCost} shiny rocks) - Upgrades: ${upgradeCount}`;
            document.getElementById("autoClickerButton").innerText = `Buy Auto Miner (Cost: ${autoMinerCost} shiny rocks) - Auto Miners: ${autoMinerCount}`;
            document.getElementById("autoClickerOutput").innerText = autoMinerValue;
            document.getElementById("minigameButton").innerText = `Play a Minigame (Cost: ${minigameCost} shiny rocks) - Minigames: ${minigameCount}`;
            document.getElementById("playGameButton").innerText = `Playing the Game (Cost: ${playGameCost} shiny rocks) - Games: ${playGameCount}`;
            updateRockCount();
        }

        function showMessage(message) {
            const messageDiv = document.getElementById("message");
            messageDiv.innerText = message;
            messageDiv.style.display = "block";
            setTimeout(() => {
                messageDiv.style.display = "none";
            }, 3000);
        }

        function startAutoMiner() {
            autoMinerActive = true;
            autoMinerInterval = setInterval(() => {
                rockCount += autoMinerValue; // Adds shiny rocks every second
                updateRockCount();
            }, 1000);
        }

        function startMinigame() {
            minigameActive = true;
            minigameInterval = setInterval(() => {
                if (minigameActive) {
                    rockCount += 5; // Adds 5 shiny rocks every second
                    updateRockCount();
                }
            }, 1000);
        }

        function startPlayGame() {
            playGameActive = true;
            playGameInterval = setInterval(() => {
                if (playGameActive) { // Check if the upgrade is active
                    rockCount += 8; // Adds 8 shiny rocks every second
                    updateRockCount();
                }
            }, 1000); // Now adds every 1 second
        }

        function clearIntervals() {
            clearInterval(autoMinerInterval);
            clearInterval(minigameInterval);
            clearInterval(playGameInterval);
            autoMinerInterval = null;
            minigameInterval = null;
            playGameInterval = null;
        }

        setInterval(saveGame, 5000); // Auto-save every 5 seconds

        window.onload = () => {
            const savedGameState = JSON.parse(localStorage.getItem("gameState"));
            if (savedGameState) {
                rockCount = savedGameState.rockCount;
                clickValue = savedGameState.clickValue;
                upgradeCost = savedGameState.upgradeCost;
                autoMinerCost = savedGameState.autoMinerCost;
                minigameCost = savedGameState.minigameCost;
                playGameCost = savedGameState.playGameCost;
                autoMinerValue = savedGameState.autoMinerValue;
                autoMinerCount = savedGameState.autoMinerCount;
                minigameCount = savedGameState.minigameCount;
                playGameCount = savedGameState.playGameCount;
                upgradeCount = savedGameState.upgradeCount;

                // Restore active states
                autoMinerActive = savedGameState.autoMinerActive;
                minigameActive = savedGameState.minigameActive;
                playGameActive = savedGameState.playGameActive;

                updateUI();

                if (autoMinerActive) {
                    startAutoMiner();
                }
                if (minigameActive) {
                    startMinigame();
                }
                if (playGameActive) {
                    startPlayGame();
                }
            }
        };
    </script>
</body>
</html>
